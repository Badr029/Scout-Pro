<div class="subscription-container">
  <div class="page-header">
    <button class="btn-back" (click)="goToHome()">
        <i class="fas fa-arrow-left"></i>
        Back to Home
      </button>
    <h1>Subscription Plans</h1>
    
  </div>
  
  

  <!-- Loading State -->
  <div *ngIf="loading" class="loading-state">
    <div class="spinner"></div>
    <p>Processing...</p>
  </div>

  <!-- Error Message -->
  <div *ngIf="error" class="error-state">
    <p class="error-message">{{ error }}</p>
  </div>

  <!-- Success Message -->
  <div *ngIf="success" class="success-state">
    <p class="success-message">{{ success }}</p>
  </div>

  <div class="plans-container">
    <div class="plan-card" [class.active]="currentPlan === 'Free'">
      <div class="plan-header">
        <h2>Free</h2>
        <p class="price">$0 <span>/month</span></p>
      </div>
      <div class="plan-features">
        <ul>
          <li *ngFor="let feature of subscriptionPlans[0].features">
            <i class="fi fi-br-check"></i> {{ feature }}
          </li>
        </ul>
      </div>
      <div class="plan-footer">
        <div *ngIf="currentPlan === 'Free'">
          <button class="btn btn-current" disabled>Current Plan</button>
        </div>
      </div>
    </div>
    <div class="plan-card premium" [class.active]="currentPlan === 'Premium'">
      <div class="plan-ribbon">Recommended</div>
      <div class="plan-header">
        <h2>Premium</h2>
        <p class="price">${{ subscriptionPlans[1].price }} <span>/month</span></p>
      </div>
      <div class="plan-features">
        <ul>
          <li *ngFor="let feature of subscriptionPlans[1].features">
            <i class="fi fi-br-check"></i> {{ feature }}
          </li>
        </ul>
      </div>
      <div class="plan-footer">
        <div *ngIf="currentPlan !== 'Premium'">
          <button class="btn btn-primary" (click)="upgradeSubscription()" [disabled]="loading">Upgrade Now</button>
        </div>
        <div *ngIf="currentPlan === 'Premium'">
          <button class="btn btn-current" disabled>Current Plan</button>
          <button class="btn btn-outline" (click)="cancelSubscription()" [disabled]="loading">Cancel</button>
        </div>
      </div>
    </div>
    

    <div class="plan-card premium" [class.active]="currentPlan === 'Premium'">
      <div class="plan-header">
        <h2>Premium</h2>
        <p class="price">${{ subscriptionPlans[1].price }} <span>/year</span></p>
      </div>
      <div class="plan-features">
        <ul>
          <li *ngFor="let feature of subscriptionPlans[1].features">
            <i class="fi fi-br-check"></i> {{ feature }}
          </li>
        </ul>
      </div>
      <div class="plan-footer">
        <div *ngIf="currentPlan !== 'Premium'">
          <button class="btn btn-primary" (click)="upgradeSubscription()" [disabled]="loading">Upgrade Now</button>
        </div>
        <div *ngIf="currentPlan === 'Premium'">
          <button class="btn btn-current" disabled>Current Plan</button>
          <button class="btn btn-outline" (click)="cancelSubscription()" [disabled]="loading">Cancel</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Payment Form (shown only when upgrading) -->
  <div *ngIf="currentPlan !== 'Premium'" class="payment-section">
    <h2>Payment Details</h2>
    <div class="payment-form">
      <div class="form-group">
        <label for="cardNumber">Card Number</label>
        <input type="text" id="cardNumber" [(ngModel)]="paymentInfo.cardNumber" class="form-control" placeholder="1234 5678 9012 3456" maxlength="19">
      </div>
      <div class="form-group">
        <label for="cardName">Cardholder Name</label>
        <input type="text" id="cardName" [(ngModel)]="paymentInfo.cardName" class="form-control" placeholder="John Doe">
      </div>
      <div class="form-row">
        <div class="form-group half">
          <label for="expiry">Expiry Date</label>
          <input type="text" id="expiry" [(ngModel)]="paymentInfo.expiry" class="form-control" placeholder="MM/YY" maxlength="5">
        </div>
        <div class="form-group half">
          <label for="cvv">CVV</label>
          <input type="text" id="cvv" [(ngModel)]="paymentInfo.cvv" class="form-control" placeholder="123" maxlength="4">
        </div>
      </div>
      <button class="btn btn-primary wide" (click)="upgradeSubscription()" [disabled]="loading">
        <span *ngIf="!loading">Upgrade to Premium</span>
        <span *ngIf="loading" class="spinner small"></span>
      </button>
    </div>
  </div>

  
  
</div>
