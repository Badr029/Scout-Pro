<div class="container">
  <!-- Loading State -->
  <div *ngIf="loading" class="loading-state">
    <div class="spinner"></div>
    <p>Loading profile...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="!loading && error" class="error-state">
    <p class="error-message">{{ error }}</p>
    <button class="btn btn-primary" (click)="fetchPlayerProfile()">Try Again</button>
  </div>

  <!-- Profile Content -->
  <div *ngIf="!loading && !error && playerData" class="profile-content">
    <!-- Profile Header -->
    <div class="profile-header">
      <div class="avatar-container">
        <img *ngIf="playerData.profile_image" [src]="'http://localhost:8000/storage/' + playerData.profile_image" [alt]="playerData.first_name">
        <div *ngIf="!playerData.profile_image" class="no-image">{{ playerData.first_name[0] }}{{ playerData.last_name[0] }}</div>
      </div>

      <div class="player-info">
        <h1 class="player-name">{{ playerData.first_name }} {{ playerData.last_name }}</h1>
        <p class="player-title">{{ playerData.position }} | {{ playerData.current_club }}</p>

        <div class="key-stats">
          <div class="stat-item">
            <span class="stat-label">Age:</span>
            <span class="stat-value">{{ calculateAge(playerData.DateofBirth) }}</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">Height:</span>
            <span class="stat-value">{{ playerData.height }} cm</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">Position:</span>
            <span class="stat-value">{{ playerData.position }}</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">Weight:</span>
            <span class="stat-value">{{ playerData.weight }} kg</span>
          </div>
        </div>

        <div class="action-buttons">
          <button class="btn btn-outline" (click)="goToEditProfile()">Edit Profile</button>
          <button class="btn btn-danger">Delete Account</button>
          <button class="btn btn-primary" (click)="goToLogin()">Logout</button>
        </div>
      </div>
    </div>

    <!-- Tabs -->
    <div class="tabs">
      <div class="tab" [class.active]="activeTab === 'about'" (click)="switchTab('about')">About</div>
      <div class="tab" [class.active]="activeTab === 'video'" (click)="switchTab('video')">Video</div>
      <div class="tab" [class.active]="activeTab === 'career'" (click)="switchTab('career')">Career</div>
    </div>

    <!-- About Tab -->
    <div class="tab-content" [class.active]="activeTab === 'about'" id="about">
      <div class="player-details">
        <div class="detail-group">
          <h3 class="detail-title">Personal Info</h3>
          <div class="detail-item">
            <span class="detail-label">Full Name:</span>
            <span class="detail-value">{{ playerData.first_name }} {{ playerData.last_name }}</span>
          </div>
          <div class="detail-item">
            <span class="detail-label">Date of Birth:</span>
            <span class="detail-value">{{ playerData.DateofBirth | date }}</span>
          </div>
          <div class="detail-item">
            <span class="detail-label">Nationality:</span>
            <span class="detail-value">{{ playerData.nationality }}</span>
          </div>
          <div class="detail-item">
            <span class="detail-label">Preferred Foot:</span>
            <span class="detail-value">{{ playerData.preferred_foot }}</span>
          </div>
          <div class="detail-item">
            <span class="detail-label">Current City:</span>
            <span class="detail-value">{{ playerData.current_city }}</span>
          </div>
          <div class="detail-item">
            <span class="detail-label">Phone:</span>
            <span class="detail-value">{{ playerData.phone_number }}</span>
          </div>
        </div>

        <div class="detail-group">
          <h3 class="detail-title">Playing Info</h3>
          <div class="detail-item">
            <span class="detail-label">Current Club:</span>
            <span class="detail-value">{{ playerData.current_club }}</span>
          </div>
          <div class="detail-item">
            <span class="detail-label">Position:</span>
            <span class="detail-value">{{ playerData.position }}</span>
          </div>
          <div class="detail-item" *ngIf="playerData.secondary_position">
            <span class="detail-label">Secondary Position:</span>
            <span class="detail-value">{{ playerData.secondary_position }}</span>
          </div>
          <div class="detail-item">
            <span class="detail-label">Playing Style:</span>
            <span class="detail-value">{{ playerData.playing_style || 'Not specified' }}</span>
          </div>
          <div class="detail-item">
            <span class="detail-label">Transfer Status:</span>
            <span class="detail-value">{{ playerData.transfer_status || 'Not specified' }}</span>
          </div>
        </div>

        <div class="detail-group" *ngIf="playerData.bio">
          <h3 class="detail-title">Bio</h3>
          <p class="player-bio">{{ playerData.bio }}</p>
        </div>
      </div>
    </div>

    <!-- Video Tab -->
    <div class="tab-content" id="video">
      <div class="video-container">
        <iframe src="" frameborder="0" allowfullscreen></iframe>
      </div>

      <h3>Recent Highlights</h3>
      <div class="video-container" style="padding-bottom: 30%; margin-top: 1rem;">
        <iframe src="" frameborder="0" allowfullscreen></iframe>
      </div>
    </div>

    <!-- Career Tab -->
    <div class="tab-content" [class.active]="activeTab === 'career'" id="career">
      <h3>Career History</h3>
      <div class="player-details" style="grid-template-columns: 1fr; margin-top: 1rem;">
        <div class="detail-group">
          <div class="detail-item">
            <span class="detail-label">Current:</span>
            <span class="detail-value">{{ playerData.current_club }}</span>
          </div>
          <div class="detail-item" *ngIf="playerData.previous_clubs">
            <span class="detail-label">Previous Clubs:</span>
            <span class="detail-value">{{ playerData.previous_clubs }}</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<script>
  document.addEventListener('DOMContentLoaded', function() {
      const tabs = document.querySelectorAll('.tab');

      tabs.forEach(tab => {
          tab.addEventListener('click', function() {
              // Remove active class from all tabs and content
              document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
              document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));

              // Add active class to clicked tab and corresponding content
              this.classList.add('active');
              const tabId = this.getAttribute('data-tab');
              document.getElementById(tabId).classList.add('active');
          });
      });
  });
</script>
